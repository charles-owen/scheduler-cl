(()=>{"use strict";var e,t={99414:(e,t,n)=>{var i=function(){};i.create=function(e,t,n,i){var o=document.querySelector(e);if(null!==o){var s='<div><site-header :title="title">'.concat(void 0!==i?'<page-nav :menu="menu"></page-nav>':"",'</site-header>\n<page-vue :json="json"></page-vue><site-footer></site-footer>\n</div>'),a=Site.info.header.component(),r=Site.info.footer.component(),l=JSON.parse(o.textContent),c=Site.store,d=Site.Site,u={"site-header":a,"site-footer":r,"page-vue":n};void 0!==i&&(u["page-nav"]=i),new Site.Vue({el:o,site:d,store:c,data:{title:t,json:l,menu:[]},template:s,components:u,methods:{setTitle:function(e){this.title=e,document.title=Site.info.siteName+" "+e},setMenu:function(e){this.menu=e},getMenu:function(){return this.menu}}})}};var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("nav",{staticClass:"cl-nav"},[n("div",[n("ul",{staticClass:"dividers"},[n("li",[n("a",{attrs:{href:e.homeLink}},[n("span",{staticClass:"home"},[e._v("Home")])])]),e._v(" "),e._l(e.menu,(function(t){return n("li",[n("a",{on:{click:function(e){return e.preventDefault(),t.click()}}},[e._v(e._s(t.name))])])}))],2)])])};o._withStripped=!0;const s={props:["menu"],data:function(){return{homeLink:Site.root+"/"}}};var a=n(12291),r=(0,a.Z)(s,o,[],!1,null,null,null);r.options.__file="vendor/cl/site/js/Vue/PageNav.vue";const l=r.exports;var c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"content cl-schedule-view"},[n("div",{staticClass:"cl-time"},[e._v(e._s(e.timeStr))]),e._v(" "),e._l(e.days,(function(t){return n("div",{staticClass:"full"},[n("h2",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.open,expression:"day.open"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.open)?e._i(t.open,null)>-1:t.open},on:{change:function(n){var i=t.open,o=n.target,s=!!o.checked;if(Array.isArray(i)){var a=e._i(i,null);o.checked?a<0&&e.$set(t,"open",i.concat([null])):a>-1&&e.$set(t,"open",i.slice(0,a).concat(i.slice(a+1)))}else e.$set(t,"open",s)}}}),e._v(" "+e._s(t.day)+" "),n("span",{staticClass:"cl-info"},[e._v(e._s(t.slots.length)+" slots/"+e._s(t.slots.length-e.ownedForDay(t))+" open")])]),e._v(" "),t.open?n("table",[e._l(t.slots,(function(t){return[t.contiguous?e._e():n("tr",{staticClass:"gap"},[n("td",[e._v(" ")]),n("td",[e._v(" ")])]),e._v(" "),n("tr",{class:e.slotClass(t)},[n("td",[n("span",{staticClass:"time"},[e._v(e._s(e.timeFormat(t.time)))]),e.staff?[n("br"),e._v(" "),n("a",{on:{click:function(n){return n.preventDefault(),e.editor(t)}}},[n("img",{attrs:{src:e.root+"/vendor/cl/site/img/pencil16.png",alt:"Edit",title:"Edit"}})]),n("br"),e._v(" "),n("a",{on:{click:function(n){return n.preventDefault(),e.deleter(t)}}},[n("img",{attrs:{src:e.root+"/vendor/cl/site/img/x.png",alt:"Delete",title:"Delete"}})])]:e._e()],2),e._v(" "),n("td",[!e.staff&&t.booked()?n("span",{staticClass:"booked"},[e._v(e._s(t.teamName))]):e._e(),e._v(" "),e.staff&&t.booked()?n("span",{staticClass:"booked"},[n("a",{on:{click:function(n){return n.preventDefault(),e.showTeam(t)}}},[e._v(e._s(t.teamName))])]):e._e(),e._v(" "),!t.booked()&&t.time>e.time?n("a",{on:{click:function(n){return n.preventDefault(),e.book(t)}}},[e._v("Click to Book")]):e._e(),e._v(" "),n("span",{staticClass:"location"},[e._v(e._s(t.location))]),e._v(" "),e.staff&&t.booked()?n("span",{staticClass:"counter"},[e._v(e._s(t.count))]):e._e(),e._v(" "),e.staff?n("span",{staticClass:"check"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.checked,expression:"slot.checked"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.checked)?e._i(t.checked,null)>-1:t.checked},on:{change:function(n){var i=t.checked,o=n.target,s=!!o.checked;if(Array.isArray(i)){var a=e._i(i,null);o.checked?a<0&&e.$set(t,"checked",i.concat([null])):a>-1&&e.$set(t,"checked",i.slice(0,a).concat(i.slice(a+1)))}else e.$set(t,"checked",s)}}})]):e._e(),e._v(" "),t.booked()&&(e.staff||e.owned(t)&&t.time>e.time)?n("span",{staticClass:"unbook"},[n("a",{on:{click:function(n){return n.preventDefault(),e.unbook(t)}}},[n("img",{attrs:{src:e.root+"/vendor/cl/site/img/x.png",alt:"Unbook",title:"Unbook"}})])]):e._e()])])]}))],2):e._e()])}))],2)};c._withStripped=!0;var d=function e(t){void 0!==t?(this.id=t.id,this.tag=t.tag,this.name=t.name,this.teaming=t.teaming,this.assigntag=null===t.assigntag?"none":t.assigntag):(this.id=0,this.tag="",this.name="",this.teaming=0,this.assigntag="none"),this.clone=function(){return new e(this)}},u=function e(t){void 0!==t?(this.id=t.id,this.time=t.time,this.duration=t.duration,this.updated=t.updated,this.location=t.location,this.teamId=t.teamId,this.teamName=t.teamName,this.memberId=t.memberId):(this.id=0,this.time=0,this.duration=10,this.updated=0,this.location="",this.teamName=null,this.teamId=null,this.memberId=null),this.repeat=1,this.contiguous=!1,this.checked=!1,this.clone=function(){return new e(this)},this.booked=function(){return null!==this.teamId||null!==this.memberId}},h=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"dialog-cl-column"},[n("div",[n("form",[e.locationOnly?e._e():[n("p",{staticClass:"flatpickr"},[n("label",[e._v("Date and Time"),n("br"),e._v(" "),n("flat-pickr",{attrs:{config:e.fpConfig,"data-input":""},model:{value:e.time,callback:function(t){e.time=t},expression:"time"}}),e._v(" "),e._m(0)],1)]),e._v(" "),n("p",[n("label",[e._v("Duration (minutes): "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.scheduleSlot.duration,expression:"scheduleSlot.duration"}],staticClass:"narrow",attrs:{type:"text"},domProps:{value:e.scheduleSlot.duration},on:{input:function(t){t.target.composing||e.$set(e.scheduleSlot,"duration",t.target.value)}}})])])],e._v(" "),n("p",[n("label",[e._v("Location"),n("br"),n("input",{directives:[{name:"model",rawName:"v-model",value:e.scheduleSlot.location,expression:"scheduleSlot.location"}],attrs:{type:"text"},domProps:{value:e.scheduleSlot.location},on:{input:function(t){t.target.composing||e.$set(e.scheduleSlot,"location",t.target.value)}}})])]),e._v(" "),0===e.scheduleSlot.id?n("p",{staticClass:"center"},[n("label",[e._v("Repeat: "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.scheduleSlot.repeat,expression:"scheduleSlot.repeat"}],staticClass:"narrow",attrs:{type:"text"},domProps:{value:e.scheduleSlot.repeat},on:{input:function(t){t.target.composing||e.$set(e.scheduleSlot,"repeat",t.target.value)}}})])]):e._e()],2)])])};h._withStripped=!0;var m=n(78887),v=n.n(m);n(9275);const f={props:["schedule-slot","location-only"],data:function(){return{time:null,fpConfig:{enableTime:!0,dateFormat:"m-d-Y h:iK",wrap:!0}}},components:{flatPickr:v()},mounted:function(){this.time=0!==this.scheduleSlot.time?1e3*this.scheduleSlot.time:null},updated:function(){if(null!==this.time&&"number"!=typeof this.time){var e=this.time.match(/([0-9]*)-([0-9]*)-([0-9]*)\s([0-9]*):([0-9]*)([AP])/),t=+e[4];"P"===e[6]?t<12&&(t+=12):12===t&&(t=0);var n=new Date(e[3],e[1]-1,e[2],t,e[5]);this.scheduleSlot.time=""!==this.time?Math.floor(n.getTime()/1e3):0}}};var p=n(31883),g=n.n(p),b=n(6584),y={insert:"head",singleton:!1};g()(b.Z,y);b.Z.locals;var _=(0,a.Z)(f,h,[function(){var e=this.$createElement,t=this._self._c||e;return t("a",{attrs:{"data-toggle":"",title:"Toggle Calendar"}},[t("span",{staticClass:"icons-cl icons-cl-calendar"})])}],!1,null,"6f2f3240",null);_.options.__file="vendor/cl/scheduler/js/SlotEditor.vue";const w=_.exports;var k=function(){var e=this,t=e.$createElement,n=e._self._c||t;return null!==e.team?n("div",[n("table",[n("tr",[n("th",[e._v(e._s(e.team.name))])]),e._v(" "),e._l(e.team.members,(function(t){return n("tr",["none"===e.schedule.assigntag?n("td",[e._v(e._s(t.name))]):n("td",[n("a",{attrs:{href:e.link+t.memberid}},[e._v(e._s(t.name))])])])}))],2),e._v(" "),n("p",{staticClass:"cl-schedule-team-email"},[n("a",{attrs:{href:e.email}},[e._v("email")])])]):n("div",{staticClass:"cl-schedule-team-fetching"},[n("p",[e._v("Fetching...")])])};function S(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return x(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return x(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,a=!0,r=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){r=!0,s=e},f:function(){try{a||null==n.return||n.return()}finally{if(r)throw s}}}}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}k._withStripped=!0;const $={extends:Site.UserVueBase,props:["view-slot","schedule"],data:function(){return{team:null,email:"mailto:",link:null}},mounted:function(){var e=this;"none"!==this.schedule.assigntag&&(this.link=this.root+"/cl/console/grading/"+this.schedule.assigntag+"/"),this.site.api.get("/api/team/"+ +this.viewSlot.teamId).then((function(t){t.hasError()?e.site.toast(e,t):e.take(t.getData("team").attributes)})).catch((function(t){e.site.toast(e,t)}))},methods:{take:function(e){this.team=e;var t=!0;this.email="";var n,i=S(e.members);try{for(i.s();!(n=i.n()).done;){var o=n.value;""!==o.email&&(t?(this.email="mailto:",t=!1):this.email+=";",this.email+=o.email)}}catch(e){i.e(e)}finally{i.f()}if(""!==this.email){var s=encodeURIComponent(e.name);this.email+="?subject=Team%20"+s}}}};var A=n(32364),C={insert:"head",singleton:!1};g()(A.Z,C);A.Z.locals;var T=(0,a.Z)($,k,[],!1,null,null,null);T.options.__file="vendor/cl/scheduler/js/TeamViewer.vue";const D=T.exports;function E(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return M(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return M(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,a=!0,r=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){r=!0,s=e},f:function(){try{a||null==n.return||n.return()}finally{if(r)throw s}}}}function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var N=Site.Member;const I={extends:Site.UserVueBase,props:["json"],data:function(){return{schedule:null,days:[],teamMode:!1,team:null,staff:!1,latest:0,time:0,timeStr:"",timer:0}},mounted:function(){var e=this;new this.$site.StickyNav("nav.cl-nav"),this.clearMenu(),this.schedule=new d(this.json.schedule),this.setTime(),this.timer=setInterval((function(){e.setTime()}),1e3),this.newSlots(this.json.slots),void 0!==this.json.team&&(this.teamMode=!0,this.team=this.json.team),this.setTitle(this.schedule.name),this.staff=this.user.atLeast(N.STAFF),this.staff&&(this.addMenu("Add Slot",(function(){e.add()})),this.addMenu("Check Future",(function(){e.checkFuture()}))),this.$site.polling.addClient("scheduler",(function(t){t.scheduler={scheduleId:e.schedule.id,after:e.latest}}),(function(t){e.take(t)}))},destroyed:function(){clearInterval(this.timer),this.timer=0},methods:{take:function(e){var t=e.getData("slots");if(null!==t){var n=t.attributes;this.newSlots(n)}},owned:function(e){return this.teamMode?null!==this.team&&e.teamId===this.team.id:this.user.member.id===e.memberId},ownedForDay:function(e){var t,n=0,i=E(e.slots);try{for(i.s();!(t=i.n()).done;){t.value.booked()&&n++}}catch(e){i.e(e)}finally{i.f()}return n},setTime:function(){this.time=Math.round((new Date).getTime()/1e3),this.timeStr=this.$site.TimeFormatter.absoluteUNIX(this.time,"long-time")},book:function(e){var t=this,n={id:e.id,teamMode:this.teamMode?1:0};if(this.teamMode){if(null===this.team)return void this.$site.toast(this,"Not a member of a team!");n.teamId=this.team.id}this.$site.api.post("/api/scheduler/slots/"+this.schedule.id+"/book",n).then((function(e){e.hasError()?t.$site.toast(t,e):t.take(e)})).catch((function(e){t.$site.toast(t,e)}))},unbook:function(e){var t=this;this.$site.api.post("/api/scheduler/slots/"+this.schedule.id+"/unbook",{id:e.id}).then((function(e){e.hasError()?t.$site.toast(t,e):t.take(e)})).catch((function(e){t.$site.toast(t,e)}))},newSlots:function(e){this.days=[];var t,n={},i=null,o=[],s=E(e);try{for(s.s();!(t=s.n()).done;){var a=t.value,r=new u(a);null!==r.teamId&&(void 0===n[r.teamId]?(r.count=1,n[r.teamId]=1):(n[r.teamId]++,r.count=n[r.teamId])),r.updated>this.latest&&(this.latest=r.updated);var l=this.$site.TimeFormatter.absoluteUNIX(r.time,"long-date");if(l!==i&&(o.length>0&&this.addDay(i,o),i=l,o=[]),o.length>0){var c=o[o.length-1];c.time+60*c.duration>=r.time&&(r.contiguous=!0)}o.push(r)}}catch(e){s.e(e)}finally{s.f()}o.length>0&&this.addDay(i,o)},addDay:function(e,t){var n=Math.round((new Date).getTime()/1e3),i=this.$site.TimeFormatter.absoluteUNIX(n,"long-date"),o=Date.parse(e)>=Date.parse(i);this.days.push({day:e,open:o,slots:t})},add:function(){var e=this,t=new u;new this.$site.Dialog({title:"New Slot",content:'<div id="cl-schedule-slot"></div>',addClass:"cl-schedule-dialog",buttons:[{contents:"Add",focus:!0,click:function(n){if(""!==t.time&&0!==t.time){var i={time:t.time,duration:t.duration,location:t.location,repeat:t.repeat};e.$site.api.post("/api/scheduler/slots/"+e.schedule.id+"/new",i).then((function(t){t.hasError()?e.$site.toast(e,t):(e.take(t),n.close())})).catch((function(t){e.$site.toast(e,t)}))}else new e.$site.Dialog.MessageBox("Must enter time","You must provide a date and time",e.$site.Dialog.MessageBox.OK)}},{contents:"Cancel",click:function(e){e.close()}}]}),this.dialogVue(t)},editor:function(e){var t=this,n=this.checked();e=n.length>0?n[0].clone:e.clone(),new this.$site.Dialog({title:"Edit Slot",content:'<div id="cl-schedule-slot"></div>',addClass:"cl-schedule-dialog",buttons:[{contents:"Update",focus:!0,click:function(i){if(""!==e.time&&0!==e.time)if(0===n.length){var o={id:e.id,time:e.time,duration:e.duration,location:e.location};t.$site.api.post("/api/scheduler/slots/"+t.schedule.id+"/update",o).then((function(e){e.hasError()?t.$site.toast(t,e):(t.take(e),i.close())})).catch((function(e){t.$site.toast(t,e)}))}else{i.close();var s,a=E(n);try{for(a.s();!(s=a.n()).done;){var r=s.value,l={id:r.id,time:r.time,duration:r.duration,location:e.location};t.$site.api.post("/api/scheduler/slots/"+t.schedule.id+"/update",l).then((function(e){e.hasError()?t.$site.toast(t,e):t.take(e)})).catch((function(e){t.$site.toast(t,e)}))}}catch(e){a.e(e)}finally{a.f()}}else new t.$site.Dialog.MessageBox("Must enter time","You must provide a date and time",t.$site.Dialog.MessageBox.OK)}},{contents:"Cancel",click:function(e){e.close()}}]}),this.dialogVue(e,n.length>0)},dialogVue:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!!t;new this.$site.Vue({el:"#cl-schedule-slot",site:this.$site,data:function(){return{slot:e,lo:n}},template:'\n          <editor :schedule-slot="slot" :location-only="lo"></editor>',components:{editor:w}})},deleter:function(e){var t=this;new this.$site.Dialog.MessageBox("Are you sure?","Are you sure you want to delete?",this.$site.Dialog.MessageBox.OKCANCEL,(function(){var n=t.checked();if(0===n.length)t.deleteSlot(e);else{var i,o=E(n);try{for(o.s();!(i=o.n()).done;){var s=i.value;t.deleteSlot(s)}}catch(e){o.e(e)}finally{o.f()}}}))},deleteSlot:function(e){var t=this;this.$site.api.post("/api/scheduler/slots/"+this.schedule.id+"/delete",{id:e.id}).then((function(e){e.hasError()?t.$site.toast(t,e):t.take(e)})).catch((function(e){t.$site.toast(t,e)}))},checked:function(){var e,t=[],n=E(this.days);try{for(n.s();!(e=n.n()).done;){var i,o=E(e.value.slots);try{for(o.s();!(i=o.n()).done;){var s=i.value;s.checked&&t.push(s)}}catch(e){o.e(e)}finally{o.f()}}}catch(e){n.e(e)}finally{n.f()}return t},slotClass:function(e){return e.booked()?this.owned(e)?"booked owned":"booked":""},showTeam:function(e){new(0,this.$site.Dialog)({title:"Team",content:'<div id="cl-schedule-team"></div>',addClass:"cl-dialog-narrow",buttons:[{contents:"Ok",click:function(e){e.close()}}]});var t=this.schedule;new this.$site.Vue({el:"#cl-schedule-team",data:function(){return{slot:e,schedule:t}},template:'\n          <viewer :view-slot="slot" :schedule="schedule"></viewer>',components:{viewer:D}})},checkFuture:function(){var e,t=Math.floor(Date.now()/1e3),n=E(this.days);try{for(n.s();!(e=n.n()).done;){var i,o=E(e.value.slots);try{for(o.s();!(i=o.n()).done;){var s=i.value;s.time>t&&(s.checked=!0)}}catch(e){o.e(e)}finally{o.f()}}}catch(e){n.e(e)}finally{n.f()}},timeFormat:function(e){return this.$site.TimeFormatter.absoluteUNIX(e,"short-time")}}};var j=n(87566),O={insert:"head",singleton:!1};g()(j.Z,O);j.Z.locals;var U=(0,a.Z)(I,c,[],!1,null,null,null);U.options.__file="vendor/cl/scheduler/js/ScheduleVue.vue";const P=U.exports;var F=function(){};F.create=function(e){e.ready((function(){i.create("div.cl-schedule-view","Schedule",P,l)}))};var R=function(){this.user=null},B=function(e){R.call(this);var t="G";void 0!==e?(this.id=e.id,this.semester=e.semester,this.section=e.section,this.created=void 0!==e.created?e.created:null,t=e.role):(this.id=0,this.semester=null,this.section=null,this.created=null,t=null),this.role=function(){return t},this.setRole=function(e){t=e}};(B.prototype=Object.create(R.prototype)).constructor=B,B.prototype.getSection=function(e){return e.getters["course/section"](this.semester,this.section)},B.prototype.getAssignment=function(e,t){return this.getSection(e).getAssignment(t)},B.GUEST="G",B.USER="U",B.DROPPED="D",B.STUDENT="T",B.STAFF="S",B.GRADER="R",B.ULA="L",B.TA="E",B.INSTRUCTOR="I",B.ADMIN="A",B.prototype.getRoles=function(){var e={};return e[B.GUEST]={name:"Guest",priority:1},e[B.DROPPED]={name:"Dropped",priority:2},e[B.USER]={name:"User",priority:3,skip:!0},e[B.STUDENT]={name:"Student",priority:4},e[B.STAFF]={name:"Staff",priority:5,skip:!0},e[B.GRADER]={name:"Grader",priority:6},e[B.ULA]={name:"Undergraduate Learning Assistant",short:"ULA",priority:7},e[B.TA]={name:"Teaching Assistant",short:"TA",priority:8},e[B.INSTRUCTOR]={name:"Instructor",priority:9},e[B.ADMIN]={name:"Admin",priority:100},e};var V=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"content"},[null!==e.schedules?n("div",{staticClass:"full"},[e.schedules.length>0?n("table",[n("tr",[n("th"),e._v(" "),n("th",[e._v("Tag")]),e._v(" "),n("th",[e._v("Name")]),e._v(" "),null!==e.teamings?n("th",[e._v("Teaming")]):e._e()]),e._v(" "),e._l(e.schedules,(function(t){return n("tr",{key:t.id},[n("td",[n("a",{on:{click:function(n){return n.preventDefault(),e.editor(t)}}},[n("img",{attrs:{src:e.root+"/vendor/cl/site/img/pencil16.png",alt:"Edit",title:"Edit"}})]),e._v(" "),n("a",{on:{click:function(n){return n.preventDefault(),e.deleter(t)}}},[n("img",{attrs:{src:e.root+"/vendor/cl/site/img/x.png",alt:"Delete",title:"Delete"}})])]),e._v(" "),n("td",[n("a",{attrs:{href:e.root+"/cl/schedule/"+t.tag}},[e._v(e._s(t.tag))])]),e._v(" "),n("td",[e._v(e._s(t.name))]),e._v(" "),null!==e.teamings?n("td",[e._v(e._s(e.teamingName(t.teaming)))]):e._e()])}))],2):n("div",{staticClass:"center"},[n("p",[e._v("There are currently no defined schedules.")]),e._v(" "),n("p",[e._v("Choose Add Schedule to add a new schedule.")])])]):e._e()])};V._withStripped=!0;var Z=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"dialog-cl-column",staticStyle:{padding:"0 1em"}},[n("div",[n("form",[n("p",[n("label",[e._v("Tag"),n("br"),n("input",{directives:[{name:"model",rawName:"v-model",value:e.schedule.tag,expression:"schedule.tag"}],ref:"tag",attrs:{type:"text"},domProps:{value:e.schedule.tag},on:{input:function(t){t.target.composing||e.$set(e.schedule,"tag",t.target.value)}}})])]),e._v(" "),n("p",[n("label",[e._v("Name"),n("br"),n("input",{directives:[{name:"model",rawName:"v-model",value:e.schedule.name,expression:"schedule.name"}],attrs:{type:"text"},domProps:{value:e.schedule.name},on:{input:function(t){t.target.composing||e.$set(e.schedule,"name",t.target.value)}}})])]),e._v(" "),null!==e.teamings?n("p",[n("label",[e._v("Teaming")]),n("br"),e._v(" "),n("select",{directives:[{name:"model",rawName:"v-model",value:e.schedule.teaming,expression:"schedule.teaming"}],on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.schedule,"teaming",t.target.multiple?n:n[0])}}},[n("option",{domProps:{value:0}},[e._v("None")]),e._v(" "),e._l(e.teamings,(function(t){return n("option",{domProps:{value:t.id}},[e._v(e._s(t.name))])}))],2)]):e._e(),e._v(" "),null!==e.teamings?n("p",[n("label",[e._v("Assignment")]),n("br"),e._v(" "),n("select",{directives:[{name:"model",rawName:"v-model",value:e.schedule.assigntag,expression:"schedule.assigntag"}],on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.schedule,"assigntag",t.target.multiple?n:n[0])}}},[n("option",{domProps:{value:"none"}},[e._v("None")]),e._v(" "),e._l(e.assignments,(function(t){return n("option",{domProps:{value:t.tag}},[e._v(e._s(t.name))])}))],2)]):e._e()])])])};Z._withStripped=!0;const L={props:["schedule","teamings","assignments"],mounted:function(){this.$refs.tag.focus()}};var z=(0,a.Z)(L,Z,[],!1,null,null,null);z.options.__file="vendor/cl/scheduler/js/Console/ScheduleEditor.vue";const G=z.exports;function K(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Y(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,a=!0,r=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){r=!0,s=e},f:function(){try{a||null==n.return||n.return()}finally{if(r)throw s}}}}function Y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}const X={extends:Site.ConsoleComponentBase,data:function(){return{teamings:null,schedules:null}},mounted:function(){var e=this;this.setTitle(": Schedules"),this.addNav2("Add Schedule",5,(function(){e.add()})),this.$site.api.get("/api/scheduler/schedules",{}).then((function(t){t.hasError()?e.$site.toast(e,t):e.take(t)})).catch((function(t){e.$site.toast(e,t)}))},methods:{teamingName:function(e){var t,n=K(this.teamings);try{for(n.s();!(t=n.n()).done;){var i=t.value;if(+i.id==+e)return i.name}}catch(e){n.e(e)}finally{n.f()}return"None"},take:function(e){var t=e.getData("schedules").attributes;this.schedules=[];var n,i=K(t);try{for(i.s();!(n=i.n()).done;){var o=n.value;this.schedules.push(new d(o))}}catch(e){i.e(e)}finally{i.f()}var s=e.getData("teamings");null!==s&&(this.teamings=s.attributes)},add:function(){var e=this,t=new d,n=this.$site.Dialog;new n({title:"New Schedule",content:'<div id="cl-schedule"></div>',buttons:[{contents:"Add",focus:!0,click:function(i){if(e.$site.Tags.validate(t.tag))if(""!==t.name.trim()){var o={tag:t.tag.trim(),name:t.name.trim(),teaming:t.teaming,assigntag:"none"!==t.assigntag?t.assigntag:null};e.$site.api.post("/api/scheduler/schedules/new",o).then((function(t){t.hasError()?e.$site.toast(e,t):(e.take(t),i.close())})).catch((function(t){e.$site.toast(e,t)}))}else new n.MessageBox("Must enter name","You must provide a non-empty name",n.MessageBox.OK)}},{contents:"Cancel",click:function(e){e.close()}}]}),this.dialogVue(t)},editor:function(e){var t=this;e=e.clone();var n=this.$site.Dialog;new n({title:"Edit Schedule",content:'<div id="cl-schedule"></div>',buttons:[{contents:"Update",focus:!0,click:function(i){if(t.$site.Tags.validate(e.tag))if(""!==e.name.trim()){var o={id:e.id,tag:e.tag.trim(),name:e.name.trim(),teaming:e.teaming,assigntag:"none"!==e.assigntag?e.assigntag:null};t.$site.api.post("/api/scheduler/schedules/update",o).then((function(e){e.hasError()?t.$site.toast(t,e):(t.take(e),i.close())})).catch((function(e){t.$site.toast(t,e)}))}else new n.MessageBox("Must enter name","You must provide a non-empty name",n.MessageBox.OK)}},{contents:"Cancel",click:function(e){e.close()}}]}),this.dialogVue(e)},dialogVue:function(e){var t,n=this.teamings,i=this.$store.state.user.user.member,o=this.$store.getters["course/section"](i.semester,i.section),s=[],a=K(o.assignments.categories);try{for(a.s();!(t=a.n()).done;){var r,l=K(t.value.assignments);try{for(l.s();!(r=l.n()).done;){var c=r.value;s.push(c)}}catch(e){l.e(e)}finally{l.f()}}}catch(e){a.e(e)}finally{a.f()}s.sort((function(e,t){return e.name<t.name?-1:e.name>t.name?1:0})),new this.$site.Vue({el:"#cl-schedule",data:function(){return{schedule:e,teamings:n,assignments:s}},template:'<editor :schedule="schedule" :teamings="teamings" :assignments="assignments"></editor>',components:{editor:G}})},deleter:function(e){var t=this,n=this.$site.Dialog;new n.MessageBox("Are you sure?","Are you sure you want to delete "+e.name,n.MessageBox.OKCANCEL,(function(){t.$site.api.post("/api/scheduler/schedules/delete",{id:e.id}).then((function(e){e.hasError()?t.$site.toast(t,e):(t.take(e),dialog.close())})).catch((function(e){t.$site.toast(t,e)}))}))}}};var q=(0,a.Z)(X,V,[],!1,null,null,null);q.options.__file="vendor/cl/scheduler/js/Console/SchedulesEditor.vue";const H=q.exports;var J=function(){};J.setup=function(e){e.tables.add({title:"Scheduler",order:100,api:"/api/scheduler/tables"});e.components.addOption({atLeast:B.TA,page:{title:"Main",route:"",order:1},section:{title:"Course",order:5},title:"Schedules",order:11,route:"/schedules",routes:[{route:"/schedules",component:H}]})},F.create(Site.Site),void 0!==Site.Site.console&&J.setup(Site.Site.console)},87566:(e,t,n)=>{n.d(t,{Z:()=>s});var i=n(72927),o=n.n(i)()((function(e){return e[1]}));o.push([e.id,"div.cl-schedule-dialog{width:300px}div.cl-schedule-view div.cl-time{text-align:center;margin:0 0 0 85px;font-size:3em;position:sticky;top:25px;z-index:100;background:#fff}div.cl-schedule-view h2{border:0;text-align:center;padding-left:3.5em}div.cl-schedule-view span.cl-info{font-weight:normal;font-size:.7em}div.cl-schedule-view span.check{position:absolute;left:4px;top:1px;padding:0}div.cl-schedule-view table{border:0;box-shadow:none}div.cl-schedule-view table td:first-child{width:6em;text-align:right;vertical-align:top;border:0;font-size:1em;padding-right:3px}div.cl-schedule-view table td:nth-child(2){position:relative;width:20em;height:4.5em;text-align:center;border-left:1px solid #000;border-right:1px solid #000;border-top:1px solid #000;border-bottom:none}div.cl-schedule-view table td:nth-child(2) span.location{position:absolute;bottom:0;left:0;width:100%;text-align:center;font-style:italic;font-size:.9em}div.cl-schedule-view table td:nth-child(2)>a{text-decoration:none;position:absolute;top:0;left:0;width:100%;padding:.45em 0 0 0;text-align:center;font-style:normal;font-weight:bold;font-size:1.3em;color:#2a2}div.cl-schedule-view table tr:last-child td:nth-child(2){border-bottom:1px solid #000}div.cl-schedule-view table tr.booked td:nth-child(2){background-color:lime;color:#000}div.cl-schedule-view table tr.booked td:nth-child(2) span.booked{position:absolute;top:0;left:0;width:100%;height:2em;padding:.25em 32px 0 0;text-align:center;font-style:normal;font-weight:bold;font-size:1.4em;color:#000;overflow:hidden}div.cl-schedule-view table tr.booked td:nth-child(2) span.booked a,div.cl-schedule-view table tr.booked td:nth-child(2) span.booked a:link,div.cl-schedule-view table tr.booked td:nth-child(2) span.booked a:visited{color:#000;text-decoration:none}div.cl-schedule-view table tr.booked td:nth-child(2) span.booked a:hover{color:red}div.cl-schedule-view table tr.booked td:nth-child(2) span.unbook{position:absolute;right:2px;top:2px;width:32px;height:32px;padding:0}div.cl-schedule-view table tr.booked td:nth-child(2) span.unbook a{padding:0}div.cl-schedule-view table tr.booked td:nth-child(2) span.unbook img{width:32px;height:32px}div.cl-schedule-view table tr.booked span.counter{position:absolute;right:2px;bottom:0}div.cl-schedule-view table tr.owned td:nth-child(2){background-color:#faa}div.cl-schedule-view table tr.gap td{height:10px;padding:0;border:0;line-height:0}div.cl-schedule-view table tr.gap td:nth-child(2){border-top:1px solid #000}",""]);const s=o},6584:(e,t,n)=>{n.d(t,{Z:()=>s});var i=n(72927),o=n.n(i)()((function(e){return e[1]}));o.push([e.id,".flatpickr-input[readonly][data-v-6f2f3240]{text-align:center}.narrow[data-v-6f2f3240]{width:3em}",""]);const s=o},32364:(e,t,n)=>{n.d(t,{Z:()=>s});var i=n(72927),o=n.n(i)()((function(e){return e[1]}));o.push([e.id,"div.cl-schedule-team-fetching p{text-align:center;font-size:1.2em;font-style:italic;padding:4em 1em;color:hotpink}p.cl-schedule-team-email{text-align:right;padding:0 2.4em 1em 2em;font-size:.9em}",""]);const s=o}},n={};function i(e){var o=n[e];if(void 0!==o)return o.exports;var s=n[e]={id:e,loaded:!1,exports:{}};return t[e].call(s.exports,s,s.exports,i),s.loaded=!0,s.exports}i.m=t,e=[],i.O=(t,n,o,s)=>{if(!n){var a=1/0;for(c=0;c<e.length;c++){for(var[n,o,s]=e[c],r=!0,l=0;l<n.length;l++)(!1&s||a>=s)&&Object.keys(i.O).every((e=>i.O[e](n[l])))?n.splice(l--,1):(r=!1,s<a&&(a=s));r&&(e.splice(c--,1),t=o())}return t}s=s||0;for(var c=e.length;c>0&&e[c-1][2]>s;c--)e[c]=e[c-1];e[c]=[n,o,s]},i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),i.j=533,(()=>{var e={533:0};i.O.j=t=>0===e[t];var t=(t,n)=>{var o,s,[a,r,l]=n,c=0;for(o in r)i.o(r,o)&&(i.m[o]=r[o]);if(l)var d=l(i);for(t&&t(n);c<a.length;c++)s=a[c],i.o(e,s)&&e[s]&&e[s][0](),e[a[c]]=0;return i.O(d)},n=self.webpackChunkcourselib=self.webpackChunkcourselib||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var o=i.O(void 0,[736],(()=>i(99414)));o=i.O(o)})();